<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../messenger/messenger.css" />
    <title>DW Messenger</title>
  </head>
  <body>
    <img class="background" src="../Pirtfolio_Image/background.png" />
    <div class="container">
      <!-- header : ìƒëŒ€ë°© ì •ë³´ í‘œì‹œ ë° ì „í™”(ìŒì„±, ì˜ìƒ)í†µí™” ë²„íŠ¼ -->
      <div class="header">
        <button class="btn">
          <img src="../Pirtfolio_Image/left-arrow.png" width="30" height="30" />
        </button>
        <img
          class="profile-pic"
          src="../Pirtfolio_Image/profile.png"
          width="40"
          height="40"
        />
        <div class="info-block">
          <p class="username">ì¸ë‚¨</p>
          <p class="status">1ì‹œê°„ ì „ì— í™œë™</p>
        </div>
        <div class="call-box">
          <button class="btn">
            <img
              src="../Pirtfolio_Image/phone-call.png"
              width="20"
              height="20"
            />
          </button>
          <button class="btn">
            <img
              src="../Pirtfolio_Image/video-call.png"
              width="20"
              height="20"
            />
          </button>
        </div>
      </div>

      <!-- ëŒ€í™”ë‚´ìš© í‘œì‹œë¶€ -->
      <div id="chat-box">
        <div class="bubble friend-bubble">ìë‹ˆ?</div>
        <div class="bubble friend-bubble">ìë‚˜ë³´ë„¤..</div>
        <div class="bubble friend-bubble">ì˜ ì</div>
        <!-- <div class="bubble my-bubble">ì™œ ì—°ë½í–ˆì–´?</div> -->
      </div>

      <!-- ëŒ€í™” ì‘ì„±ë¶€ -->
      <div class="footer">
        <textarea id="input" placeholder="ë©”ì„¸ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
        <button class="btn" id="sendBtn">
          <img src="../Pirtfolio_Image/send.png" width="24" height="24" />
        </button>
      </div>
    </div>
  </body>
  <script>
    const chatBox = document.querySelector(`#chat-box`);
    const input = document.querySelector(`#input`);
    const sendBtn = document.querySelector(`#sendBtn`);
    input.focus();

    function timeStamp(a) {
      if (a < 1000) {
        `<p>${parseInt(a / 1000)}ì´ˆì „</p>`;
      } else if (a > 1000 && a - 1 < 60000) {
        `<p>${parseInt(a / 60000)}ë¶„ì „</p>`;
      } else if (a > 6000 && a < 3600000) {
        `<p>${parseInt(a / 3600000)}ì‹œê°„ì „</p>`;
      } else {
        `<p>${parseInt(a / (360000 * 24))}ì¼ì „</p>`;
      }
    }

    function sendMessage(e) {
      console.log(e.timeStamp);
      const inputValue = input.value;
      if (inputValue.length == 0) {
        return false;
      }
      let changMessage = inputValue.replaceAll(" ", "&nbsp;");
      changMessage = changMessage.replaceAll("\n", "<br />");
      changMessage = changMessage.replaceAll("í”¼ì", "ğŸ•");
      changMessage = changMessage.replaceAll("í–„ë²„ê±°", "ğŸ”");
      changMessage = changMessage.replaceAll("í•«ë„ê·¸", "ğŸŒ­");
      changMessage = changMessage.replaceAll("ë¼ë©´", "ğŸœ");
      changMessage = changMessage.replaceAll("ì´ˆë°¥", "ğŸ£");
      changMessage = changMessage.replaceAll("ê³ ê¸°", "ğŸ¥©");
      changMessage = changMessage.replaceAll("ê³¼ì", "ğŸª");
      changMessage = changMessage.replaceAll("í¬ë„", "ğŸ‡");
      changMessage = changMessage.replaceAll("ì‚¬ê³¼", "ğŸ");
      changMessage = changMessage.replaceAll("ë”¸ê¸°", "ğŸ“");
      changMessage = changMessage.replaceAll("ë°”ë‚˜ë‚˜", "ğŸŒ");
      changMessage = changMessage.replaceAll("íŒŒì¸ì• í”Œ", "ğŸ");
      changMessage = changMessage.replaceAll("ë§ê³ ", "ğŸ¥­");
      changMessage = changMessage.replaceAll("ì²´ë¦¬", "ğŸ’");
      changMessage = changMessage.replaceAll("ì˜¥ìˆ˜ìˆ˜", "ğŸŒ½");
      changMessage = changMessage.replaceAll("ìˆ˜ë°•", "ğŸ‰");
      changMessage = changMessage.replaceAll("ì–‘íŒŒ", "ğŸ§…");
      changMessage = changMessage.replaceAll("ë‹¹ê·¼", "ğŸ¥•");
      changMessage = changMessage.replaceAll("ê½ƒ", "ğŸŒ¼");
      changMessage = changMessage.replaceAll("ë‚˜ë¬´", "ğŸŒ³");
      changMessage = changMessage.replaceAll("ã…‹ã…‹ã…‹", "ğŸ˜");
      changMessage = changMessage.replaceAll("ã…œã…œ", "ğŸ˜¥");
      changMessage = changMessage.replaceAll("ã…ã…", "ğŸ˜„");
      changMessage = changMessage.replaceAll("ì°¨", "ğŸš—");
      changMessage = changMessage.replaceAll("íƒì‹œ", "ğŸš•");
      changMessage = changMessage.replaceAll("ë²„ìŠ¤", "ğŸšŒ");
      changMessage = changMessage.replaceAll("ê¸°ì°¨", "ğŸš…");
      changMessage = changMessage.replaceAll("ë¹„í–‰ê¸°", "âœˆ");
      console.log(changMessage);

      const div = document.createElement("div");
      div.classList.add("bubble", "my-bubble");
      div.innerHTML = `${changMessage}<br> ${timeStamp(e.timeStamp)}`;
      chatBox.append(div);
      chatBox.scrollTop = chatBox.scrollHeight;
      input.value = "";
      //   chatBox.lastElementChild.scrollIntoView();
    }

    function sendByEnter(e) {
      console.log(e);
      if (e.key == "Enter" && !e.shiftKey) {
        sendMessage(e);
        e.preventDefault();
      }
    }

    sendBtn.addEventListener("click", sendMessage);
    input.addEventListener("keypress", sendByEnter);
  </script>
</html>
